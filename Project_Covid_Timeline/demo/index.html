<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes" />

    <title>Covid-19 Event Timeline</title>

	<script src="https://d3js.org/d3.v4.min.js"></script>
    <!-- Timeline Style -->
    <link rel="stylesheet" href="../src/css/timeline.css">
    <link rel="stylesheet" href="css/prettify.css">

    <!-- Color scale -->
    <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>

    <!-- Demo style -->
    <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="css/demo.css">
    <script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js" integrity="sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ==" crossorigin=""></script>
    <meta name="description" content="jQuery timeline plugin, easily creates a timeline."/>
    <meta name="keywords" content="timelinejs, timeline, timeline slider, milestone, topic:chronology, jquery timeline plugin"/>

  </head>
  <body>

    <header class="header-wrapper">
      <div class="container">
        <div class="page-intro">
          <h1>Covid-19 Event Timeline</h1>
         
        </div>
      </div>
    </header><!-- /.header-wrapper -->

    <main class="main-wrapper container">

      <section class="section-list">
        <div class="container">
  
          <div class="section-list-box">
   
            <div class="timeline-containers" >
              <div class="timeline timeline-1">

                <div data-time="2020">
                  <div id="my_dataviz-Container">
                    <div class="tooltip" id="tooltip1"> </div>
                    <div class="tooltip" id="tooltip2"> </div>
                    <div id="my_dataviz" style=" float:left; width:50%;height:100%" >
                     
                    </div>
                  
                    
                    <div class="timeline-text" style="background: rgba(255, 255, 255, 0.5); margin-left: auto; margin-right:0;width:35%;height:330px" >
                      <h2 style="text-align: center;">Covid Highlight</h2>
                      <div class="timeline-content"                      
                      style=" float:left; width:50%;height:100%; margin: 5">
                        Date: <label id="lblDate"></label>
                        <br>
                        Covid Cases: <label id="lblCovid"></label>
                      <br>   New Cases: <label id="lblNewCase"></label><br>
                      Death Cases:<label id="lblDeath"></label>  
                    <br>
                      New Death Cases: <label id="lblNewDeath"></label>
                    <br>
                    Events: <label id="lblEvent"></label>  
                    </div>
                    <div class="tooltip"></div>
                    <div id="piechart0" style="margin-left: auto; margin-right:0;width:50%;height:330px" ></div>
                    </div>
                  </div>
    
								</div>
								
								
								<div data-time="2021">
                  <div id="my_dataviz-Container">
                    <div class="tooltip" id="tooltip3"> </div>
                    <div class="tooltip" id="tooltip4"> </div>
                    <div id="my_dataviz1" style=" float:left; width:50%;height:100%" >
                     
                    </div>
                  
                    
                    <div class="timeline-text" style="background: rgba(255, 255, 255, 0.5); margin-left: auto; margin-right:0;width:35%;height:330px" >
                      <h2 style="text-align: center;">Covid Highlight</h2>
                      <div class="timeline-content"                      
                      style=" float:left; width:50%;height:100%; margin: 5">
                        Date: <label id="lblDate1"></label>
                        <br>
                        Covid Cases: <label id="lblCovid1"></label>
                      <br>   New Cases: <label id="lblNewCase1"></label><br>
                      Death Cases:<label id="lblDeath1"></label>  
                    <br>
                      New Death Cases: <label id="lblNewDeath1"></label>
                    <br>
                    Events: <label id="lblEvent1"></label>  
                    </div>
                    <div class="tooltip"></div>
                    <div id="piechart1" style="margin-left: auto; margin-right:0;width:50%;height:330px" ></div>
                    </div>
                  </div>
    
								</div>

								<div data-time="2022">
                  <div id="my_dataviz-Container">
                    <div class="tooltip" id="tooltip5"> </div>
                    <div class="tooltip" id="tooltip6"> </div>
                    <div id="my_dataviz2" style=" float:left; width:45%;height:100%" >
                     
                    </div>
                  
                    
                    <div class="timeline-text" style="background: rgba(255, 255, 255, 0.5); margin-left: auto; margin-right:0;width:35%;height:330px" >
                      <h2 style="text-align: center;">Covid Highlight</h2>
                      <div class="timeline-content"                      
                      style=" float:left; width:50%;height:100%; margin: 5">
                        Date: <label id="lblDate2"></label>
                        <br>
                        Covid Cases: <label id="lblCovid2"></label>
                      <br>   New Cases: <label id="lblNewCase2"></label><br>
                      Death Cases:<label id="lblDeath2"></label>  
                    <br>
                      New Death Cases: <label id="lblNewDeath2"></label>
                    <br>
                    Events: <label id="lblEvent2"></label>  
                    </div>
                    <div class="tooltip"></div>
                    <div id="piechart2" style="margin-left: auto; margin-right:0;width:50%;height:330px" ></div>
                    </div>
                  </div>
								</div>

              </div>
            </div>
            <!-- /.timeline-container -->
          </div>
          <!-- /.section-list-box -->




        </div>
      </section>

      
    </main><!-- /.main-wrapper -->

    <footer class="footer-wrapper">
      <div class="container">
        
      </div>
    </footer><!-- /.footer-wrapper -->




		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>

		<!-- Demo Page -->
		<script async defer src="https://buttons.github.io/buttons.js"></script>
		<script src="js/prettify.js"></script>
		<script src="js/demo.js"></script>

		<!-- Timeline -->
		<script src="../src/js/timeline.js" type="text/javascript"></script>
		<script type="text/javascript">

			$(function(){
				// Demo 1
				$('.timeline-1').Timeline();
				// Demo 2

			});
var year;
      var data2 = { a: 6, b: 16, c: 20, d: 14, e: 19, f: 12 }

let option = 1;
			
var margin = {top: 10, right: 30, bottom: 30, left: 60},
    width = 760 - margin.left - margin.right,
    height = 320 - margin.top - margin.bottom;

// set the color scale
var piecolor = d3.scaleOrdinal()
        .domain(["new_cases", "new_deaths"])
        .range(d3.schemeDark2);

// set the dimensions and margins of the graph
var pWidth = 200
    pHeight = 200
    pMargin = 20

    // The radius of the pieplot is half the width or half the height (smallest one). I subtract a bit of margin.
    var radius = Math.min(pWidth, pHeight) / 2 - pMargin

    var tip = d3.select("body").append("div")
        .attr("class", "tooltip")
        .style("opacity", 0)

          // append the svg object to the div called 'my_dataviz'
    var svg = d3.select("#piechart0")
        .append("svg")
        .attr("width", pWidth)
        .attr("height", pHeight)
        .append("g")
        .attr("transform", "translate(" + pWidth / 2 + "," + pHeight / 2 + ")");

    var svg1 = d3.select("#piechart1")
        .append("svg")
        .attr("width", pWidth)
        .attr("height", pHeight)
        .append("g")
        .attr("transform", "translate(" + pWidth / 2 + "," + pHeight / 2 + ")");

        var svg2 = d3.select("#piechart2")
        .append("svg")
        .attr("width", pWidth)
        .attr("height", pHeight)
        .append("g")
        .attr("transform", "translate(" + pWidth / 2 + "," + pHeight / 2 + ")");
    
function loadTable(graphNo, tableName,fileName, tooltips1, tooltips2,lblCovids,lblNewCases,lblDeaths,lblNewDeaths,lblEvents,lblDate) {

 
// option = graphNo
var svg = d3.select("#" + tableName)
  .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform",
          "translate(" + margin.left + "," + margin.top + ")");
  
//Read the dataCovid_2020_New.csv
d3.csv("https://benflop.github.io/CSC3007-project/" +fileName,
function(d){
    return { date : formatDate(d.date), value : parseInt(d.total_cases), detail: d.Events,content: d.Summary.substring(0, 110).replace("1.", "") + "...",eventUrl : d.Url,deaths: parseInt(d.total_deaths),new_case:parseInt(d.new_cases),new_death:parseInt(d.new_deaths)};
  },
function(data) {

  
var local = graphNo;
option = graphNo;
update(data2,local)

console.log(data);
//myFunction()
  var xmin = d3.min(data, function(d) { return d.date; });
  var xmax = d3.max(data, function(d) { return d.date; });
  
  var x = d3.scaleTime()

    .domain([d3.timeDay(xmin), d3.timeDay.offset(xmax)])
    .range([0, width]);

    console.log(d3.timeDay(xmin));

    var padding = 1;


    console.log("Max Value:"+d3.max(data, function(d) { return d.value; }));
  var y = d3.scaleLinear()
    .domain([0, d3.max(data, function(d) { return d.value; })])
    .range([height - padding, padding]);

  svg.append("g")
    .attr("transform", "translate(0," + height + ")")
    .call(d3.axisBottom(x));

  svg.append("g")
    .call(d3.axisLeft(y));

  // This allows to find the closest X index of the mouse:
  var bisect = d3.bisector(function(d) { return d.date; }).left;

  // Create a line function that can convert data[] into x and y points
  var line = d3.line()
    .x(function(d) { return x(d.date); })
    .y(function(d) { return y(d.value); });
    
  var line2 = d3.line()
    .x(function(d) { return x(d.date); })
    .y(function(d) { return y(d.deaths); });


  // Create the circle that travels along the curve of chart
  var focus = svg
    .append('g')
    .append('circle')
      .style("fill", "none")
      .attr("stroke", "black")
      .attr('r', 3.5)
      .style("opacity", 0)
      .style("Background", "white");
      
  var focus2 = svg
    .append('g')
    .append('circle')
      .style("fill", "none")
      .attr("stroke", "black")
      .attr('r', 3.5)
      .style("opacity", 0)
      .style("Background", "white");


//Add the line  to the graph
  svg.append("path")
    .datum(data)
    .attr("fill", "none")
    .attr("stroke", "steelblue")
    .attr("stroke-width", 1.5)
    .attr("d", line);

    svg.append("path")
    .datum(data)
    .attr("fill", "none")
    .attr("stroke", "yellow")
    .attr("stroke-width", 1.5)
    .attr("d", line2);
    
  svg.selectAll("circle")
    .data(data)
    .enter()
    .append("circle")
    .attr("cx", function(d) { return x(d.date); } )
    .attr("cy", function(d) { return y(d.value); } )
    .attr("r", 0.5)
    .attr("fill", "red")
  
  svg.selectAll("circle")
    .data(data)
    .enter()
    .append("circle")
    .attr("cx", function(d) { return x(d.date); } )
    .attr("cy", function(d) { return y(d.deaths); } )
    .attr("r", 0.5)
    .attr("fill", "red")

  svg.append('rect')
    .style("fill", "none")
    .style("pointer-events", "all")
    .attr('width', width)
    .attr('height', height)
    .on('mouseover', mouseover)
    .on('mousemove', mousemove)
    .on('mouseout',(event, d) =>  mouseout);
    
    var hoverLineGroup = svg.append("g")
    .attr("class", "hover-line")
    .style("opacity", 0);


    var hoverLine = hoverLineGroup
                    .append("line")
                        .attr("stroke", "#000")
                        .attr("x1", 10).attr("x2", 10) 
                        .attr("y1", 0).attr("y2", height); 

// option = graphNo;
// update(data);
  // What happens when the mouse move -> show the annotations at the right positions.
  function mouseover() {
    focus.style("opacity", 1)
    focus2.style("opacity", 1)
    hoverLineGroup.style("opacity", 0);
   // focusText.style("opacity",1)

  }

  function mousemove(event, d)  {
    //Get the mouse position relative to the chart
        
    var x0 = x.invert(d3.mouse(this)[0]);
    var i = bisect(data, x0, 1);
    selectedData = data[i]
   //console.log(selectedData);
        //Check if mouse is over a point
    
        
if (selectedData != null && selectedData.value != null) {
          
focus
      .attr("cx", x(selectedData.date))
      .attr("cy", y(selectedData.value))
focus2
      .attr("cx", x(selectedData.date))
      .attr("cy", y(selectedData.deaths))
//Draw line when mouse is over a point
      svg.append("path")
      .datum(data)
      .attr("fill", "none")
      .attr("border", "1px dotted black")
      .attr("stroke-width", 1.5)
      .attr("d", line);

d3.select("#" + tooltips1)      
.html("Confirmed:" + selectedData.value)
.style("position", "absolute")
.style("background", "#fff")
.style("tran", "1px solid #aaa")
.style("left", x(selectedData.date) +80 + ((width + margin.left + margin.right+440)*graphNo) + "px")
.style("top", y(selectedData.value) + "px")
.style("font-size", "10px");

d3.select("#" + tooltips2)
.html("Death:" + selectedData.deaths)
.style("position", "absolute")
.style("background", "#fff")
.style("tran", "1px solid #aaa")
.style("left", x(selectedData.date)+20+((width + margin.left + margin.right+430)*graphNo)  + "px")
.style("top", y(selectedData.deaths) + "px")
.style("font-size", "10px");    


hoverLine.attr("x1", x(selectedData.date)).attr("x2", x(selectedData.date))
hoverLineGroup.style("opacity", 1);

var covidData = {new_death: selectedData.new_death, new_cases: selectedData.new_case };
console.log("Trace PIE: " + "#piechart" + local)
update(covidData, local)

$('#' +lblCovids).html(selectedData.value);
$('#' + lblNewCases).html(selectedData.new_case);
$('#' + lblDeaths).html(selectedData.deaths);
$('#' + lblNewDeaths).html(selectedData.new_death);
$('#' + lblEvents).html(selectedData.detail!=''?"<br>"+selectedData.content+"<a href='" + selectedData.eventUrl  +"' target='_blank'>Find Out More</a>":"");
var formatDate = d3.timeFormat("%d/%m/%Y");
$('#' + lblDate).html(formatDate (selectedData.date));
        
        }

  }
 
function mouseout() {
    focus.style("opacity", 0)
    focus2.style("opacity", 0)
    hoverLineGroup.style("opacity", 0);
    // focusText.style("opacity", 0)
  }


})
}

function formatDate(str){
  var parts = str.split("/");
var dt = new Date(parseInt(parts[2], 10),
                  parseInt(parts[1], 10) - 1,
                  parseInt(parts[0], 10));
return dt;

}

// update(data2,"#piechart" + option)

// A function that create / update the plot for a given variable:
function update(data, name) {

  console.log("Data: " + JSON.stringify(data))
  // var svgs = d3.select(name)
  //       .append("svg")
  //       .attr("width", pWidth)
  //       .attr("height", pHeight)
  //       .append("g")
  //       .attr("transform", "translate(" + pWidth / 2 + "," + pHeight / 2 + ")");

  var s = svg;
  switch(name){
    case 0: s = svg;
    break;
    case 1: s = svg1;
    break;

  case 2: s = svg2;
  break;
  }

// Compute the position of each group on the pie:
var pie = d3.pie()

    .value(function (d) { return d.value; })
    .sort(function (a, b) {
        console.log(a);
        return d3.ascending(a.key, b.key);
    }) // This make sure that group order remains the same in the pie chart
var data_ready = pie(d3.entries(data))

console.log(data)

// map to data
var u = s.selectAll("path")
    .data(data_ready)
    .on("mouseover", function (d) {
                tip.style("opacity", 1)
                    .html("New Cases: " + data.new_cases + " , " + "New Deaths: " + data.new_death)
                    .style("left", (event.pageX) + "px")
                    .style("top", (event.pageY) + "px")
            })
            .on("mouseout", function (d) {
                tip.style("opacity", 0)
            })

// Build the pie chart: Basically, each part of the pie is a path that we build using the arc function.
u
    .enter()
    .append('path')
    .merge(u)
    .transition()
    .duration(1000)
    .attr('d', d3.arc()
        .innerRadius(0)
        .outerRadius(radius)
    )
    .attr('fill', function (d) { return (piecolor(d.data.key)) })
    .attr("stroke", "white")
    .style("stroke-width", "2px")
    .style("opacity", 1)

// remove the group that is not present anymore
u
    .exit()
    .remove()
}    

loadTable(0,'my_dataviz','Covid_2020_New.csv', 'tooltip1', 'tooltip2','lblCovid','lblNewCase','lblDeath','lblNewDeath','lblEvent','lblDate')
loadTable(1,'my_dataviz1','Covid_2021_New.csv', 'tooltip3', 'tooltip4','lblCovid1','lblNewCase1','lblDeath1','lblNewDeath1','lblEvent1','lblDate1')
loadTable(2,'my_dataviz2','Covid_2022_New.csv', 'tooltip5', 'tooltip6','lblCovid2','lblNewCase2','lblDeath2','lblNewDeath2','lblEvent2','lblDate2')

// append the svg object to the body of the page
// var svg1 = d3.select("#my_dataviz1")
//   .append("svg")
//     .attr("width", width + margin.left + margin.right)
//     .attr("height", height + margin.top + margin.bottom)
//     .append("g")
//     .attr("transform",
//           "translate(" + margin.left + "," + margin.top + ")");

// //Read the data
// d3.csv("https://benflop.github.io/CSC3007-project/Covid_2021.csv",

//   // When reading the csv, I must format variables:
//   function(d){
//     return { date : d3.timeParse("%Y-%m-%d")(d.date), value : d.Confirmed, detail: d.Events }
//   },

//   // Now I can use this dataset:
//   function(data) {
    
  
//     console.log("data:" +JSON.stringify(data))
//     // Keep only the 90 first rows
//     data = data.filter(function(d,i){ return i<90})

//     // Add X axis --> it is a date format
//     var x = d3.scaleTime()
//       .domain(d3.extent(data, function(d) { return d.date; }))
//       .range([ 0, width ]);
//     svg1.append("g")
//       .attr("transform", "translate(0," + (height+5) + ")")
//       .call(d3.axisBottom(x).ticks(5).tickSizeOuter(0));

//     // Add Y axis
//     var y = d3.scaleLinear()
//       .domain( d3.extent(data, function(d) { return +d.value; }) )
//       .range([ height, 0 ]);
//     svg1.append("g")
//       .attr("transform", "translate(-5,0)")
//       .call(d3.axisLeft(y).tickSizeOuter(0));

//     // Add the area
//     svg1.append("path")
//       .datum(data)
//       .attr("fill", "#69b3a2")
//       .attr("fill-opacity", .3)
//       .attr("stroke", "none")
//       .attr("d", d3.area()
//         .x(function(d) { return x(d.date) })
//         .y0( height )
//         .y1(function(d) { return y(d.value) })
//         )

// //Draw a line for the data
// svg1.append("path")
//       .datum(data)
//       .attr("fill", "none")
//       .attr("stroke", "#69b3a2")
//       .attr("stroke-width", 4)
//       .attr("d", d3.line()
//         .x(function(d) { return x(d.date) })
//         .y(function(d) { return y(d.value) })
//         )   // Add the line to the graph

//     svg1.selectAll("circle")
//     .data(data)
//     .enter()
//     .append("circle")
//     .attr("cx", function(d) { return x(d.date); } )
//     .attr("cy", function(d) { return y(d.value); } )
//     .attr("r", 5)
//     .attr("fill", "red")
//     .on("mouseover", (event, d) => {
//       //Select the domain of the x axis
//       var x = d3.scaleTime()
//         .domain(d3.extent(data, function(d) { return d.date; }))
//         .range([ 0, width ]);
//       //Select the domain of the y axis
//       var y = d3.scaleLinear()
//         .domain( d3.extent(data, function(d) { return +d.value; }) )
//         .range([ height, 0 ]);

// //FOCUS the line when the mouse is over it
//       svg1.append("g")
//         .attr("class", "focus")
//         .style("display", "none")
//         .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
//       svg1.select(".focus")
//         .append("circle")
//         .attr("r", 4.5);
//       svg1.select(".focus")
//         .append("text")
//         .attr("x", 9)
//         .attr("dy", ".35em");

//         //Highlight the domain of the x axis
//         //Create color for the highlight
//         var color = d3.color("#69b3a2");
//         color.opacity = 0.5;
//         //Create the highlight
//         //set the x axis to the highlight
//         svg1.append("g")
//           .attr("class", "x axis")
//           .attr("transform", "translate(0," + height + ")")
//           .call(d3.axisBottom(x).ticks(5).tickSizeOuter(0))
//           .selectAll("text")
//           .style("fill", color);
//         //set the y axis to the highlight
//         svg1.append("g")
//           .attr("class", "y axis")
//           .attr("transform", "translate(-5,0)")
//           .call(d3.axisLeft(y).tickSizeOuter(0))
//           .selectAll("text")
//           .style("fill", color);
//         //set the line to the highlight
//         svg1.append("path")
//           .datum(data)
//           .attr("fill", "none")
//           .attr("stroke", color)
//           .attr("stroke-width", 4)
//           .attr("d", d3.line()
//             .x(function(d) { return x(d.date) })
//             .y(function(d) { return y(d.value) })
//             )
//         //set the circle to the highlight
//         svg1.selectAll("circle")
//           .data(data)
//           .enter()
//           .append("circle")
//           .attr("cx", function(d) { return x(d.date); } )
//           .attr("cy", function(d) { return y(d.value); } )
//           .attr("r", 5)
//           .attr("fill", color)
//           .on("mouseover", (event, d) => {
//             //Select the domain of the x axis
//             var x = d3.scaleTime()
//               .domain(d3.extent(data, function(d) { return d.date; }))
//               .range([ 0, width ]);
//             //Select the domain of the y axis
//             var y = d3.scaleLinear()
//               .domain( d3.extent(data, function(d) { return +d.value; }) )
//               .range([ height, 0 ]);
//             //FOCUS the line when the mouse is over it
//             svg1.append("g")
//               .attr("class", "focus")
//               .style("display", "none")
//               .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
//             svg1.select(".focus")
//               .append("circle")
//               .attr("r", 4.5);
//             svg1.select(".focus")
//               .append("text")
//               .attr("x", 9)
//               .attr("dy", ".35em");
//             //Highlight the domain of the x axis
//             //Create color for the highlight
//             var color = d3.color("#69b3a2");
//             color.opacity = 0.5;
//             //Create the highlight
//             //set the x axis to the highlight
//             svg1.append("g")
//               .attr("class", "x axis")
//               .attr
//               .style("display", "none")
              
//         svg1.append("rect")
//           .attr("x", x(event.x))
//           .attr("y", y(event.y))
//           .attr("width", x(d.date) - x(event.x))
//           .attr("height", y(event.y) - y(d.value))
//           .style("fill", color)
//           .style("fill-opacity", 0.5);
//         svg1.select(".focus")
//           .select("circle")
//           .attr("cx", x(event.x))
//           .attr("cy", y(event.y));
//         svg1.select(".focus")
//           .select("text")
//           .text(function(d) { return d.value; });
//         svg1.select(".focus")
//           .style("display", "block");
//         });
//      //Add focus to the tooltip
//       var focus = svg1.append("g")
//         .attr("class", "focus")
//         .style("display", "none");
//       focus.append("circle")
//         .attr("r", 4.5);
//       focus.append("text")
//         .attr("x", 9)
//         .attr("dy", ".35em");
//       //Add the tooltip to the graph
//       svg1.append("rect")
//         .attr("class", "overlay")
//         .attr("width", 10)
//         .attr("height", 10)
//         .on("mouseover", function() { focus.style("display", null); })
//         .on("mouseout", function() { focus.style("display", "none"); })
//         .on("mousemove", mousemove);
      
//         function mousemove() {  

//         var x0 = x.invert(d3.mouse(this)[0]),
//             i = bisectDate(data, x0, 1),
//             d0 = data[i - 1],
//             d1 = data[i],
//             d = x0 - d0.date > d1.date - x0 ? d1 : d0;
//         focus.attr
//           ("transform", "translate(" + x(d.date) + "," + y(d.value) + ")");
//         focus.select("text").text(d.detail);
//       } 
//       //Add the tooltip
//       console.log("event:" +JSON.stringify(event));
//       console.log("d:" +JSON.stringify(d));
//         //Add fill to the circle
//         d3.select(event.currentTarget)
//         .classed("selected", true);
//         //Add the tooltip

//       d3.select(".tooltip")
//       .html("Event: " + event.detail)
//       .style("position", "absolute")
//       .style("background", "#fff")
//       .style("left", (event.pageX) + "px")
//       .style("top", (event.pageY) + "px");     

//       d3.select(event.currentTarget)
//         .attr("fill", "orange")
//         .attr("r", 10);
//     })
//     .on("mouseout", function(d) {
//       //Remove the fill from the circle
//       d3.select(event.currentTarget)
//         .classed("selected",false);

//       d3.select(".tooltip")
//       .html("");

//       d3.select(this)
//         .attr("fill", "red")
//         .attr("r", 5);
//     });
   

// })
// var svg2 = d3.select("#my_dataviz2")
//   .append("svg")
//     .attr("width", width + margin.left + margin.right)
//     .attr("height", height + margin.top + margin.bottom)
//     .append("g")
//     .attr("transform",
//           "translate(" + margin.left + "," + margin.top + ")");

// //Read the data
// d3.csv("https://benflop.github.io/CSC3007-project/Covid_2022.csv",

//   // When reading the csv, I must format variables:
//   function(d){
//     return { date : d3.timeParse("%Y-%m-%d")(d.date), value : d.Confirmed, detail: d.Events }
//   },

//   // Now I can use this dataset:
//   function(data) {console.log("data:" +JSON.stringify(data))
//     // Keep only the 90 first rows
//     data = data.filter(function(d,i){ return i<90})

//     // Add X axis --> it is a date format
//     var x = d3.scaleTime()
//       .domain(d3.extent(data, function(d) { return d.date; }))
//       .range([ 0, width ]);
//     svg2.append("g")
//       .attr("transform", "translate(0," + (height+5) + ")")
//       .call(d3.axisBottom(x).ticks(5).tickSizeOuter(0));

//     // Add Y axis
//     var y = d3.scaleLinear()
//       .domain( d3.extent(data, function(d) { return +d.value; }) )
//       .range([ height, 0 ]);
//     svg2.append("g")
//       .attr("transform", "translate(-5,0)")
//       .call(d3.axisLeft(y).tickSizeOuter(0));

//     // Add the area
//     svg2.append("path")
//       .datum(data)
//       .attr("fill", "#69b3a2")
//       .attr("fill-opacity", .3)
//       .attr("stroke", "none")
//       .attr("d", d3.area()
//         .x(function(d) { return x(d.date) })
//         .y0( height )
//         .y1(function(d) { return y(d.value) })
//         )

//     // Add the line
//     svg2.append("path")
//       .datum(data)
//       .attr("fill", "none")
//       .attr("stroke", "#69b3a2")
//       .attr("stroke-width", 4)
//       .attr("d", d3.line()
//         .x(function(d) { return x(d.date) })
//         .y(function(d) { return y(d.value) })
//         )

//     // Add the line
//     svg2.selectAll("myCircles")
//       .data(data)
//       .enter()
//       .append("circle")
//         .attr("fill", "red")
//         .attr("stroke", "none")
//         .attr("cx", function(d) { return x(d.date) })
//         .attr("cy", function(d) { return y(d.value) })
//         .attr("r", 3)

// })






		</script>
  </body>
</html>
